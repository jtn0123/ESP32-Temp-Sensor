<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ESP32 eInk Room Node — Display Simulator</title>
    <link rel="stylesheet" href="style.css?v=1" />
    <style>
      /* Inline minimal sizing CSS to satisfy tests */
      #epd { width: 500px; height: 244px; }
      @media (max-width: 600px){ #epd { width: 300px; height: 146px; } }
    </style>
  </head>
  <body>
    <div class="wrap">
      <h1>ESP32 eInk Room Node — Display Simulator (250×122)</h1>
      <canvas id="epd" width="250" height="122" style="image-rendering: pixelated"></canvas>
      <p id="hint">If you see a blank canvas, open your browser console for logs.</p>
      <div class="controls">
        <button id="refresh">Refresh</button>
        <label><input type="checkbox" id="showWindows"> Show partial windows</label>
        <label><input type="checkbox" id="stressMode"> Stress test</label>
        <label><input type="checkbox" id="specOnly"> Spec only</label>
        <label><input type="checkbox" id="showGrid"> Show 4px grid</label>
        <label><input type="checkbox" id="showRects"> Show geometry rects</label>
        <label><input type="checkbox" id="showLabels"> Label regions</label>
        <label><input type="checkbox" id="simulateGhosting"> Simulate ghosting</label>
        <label>
          Variant
          <select id="variantMode">
            <option value="v1" selected>v1</option>
          </select>
        </label>
        <label>
          Spec
          <select id="specMode">
            <option value="v1" selected>v1 (current)</option>
            <option value="v2_grid">v2 (4px grid + type)</option>
            <option value="v2_1_grid">v2.1 (labels-in-box, badges, footer bar)</option>
          </select>
        </label>
        <label>
          Preset
          <select id="presetMode">
            <option value="normal" selected>Normal</option>
            <option value="low_batt">Low battery</option>
            <option value="no_mqtt">No MQTT</option>
            <option value="extreme">Extreme temps</option>
            <option value="long_city">Very long city name</option>
          </select>
        </label>
        <label>
          Layout
          <select id="layoutMode">
            <option value="split3" selected>Split + 3-row status</option>
          </select>
        </label>
      </div>

      <details id="regionInspector" style="margin-top:8px;">
        <summary>Region inspector</summary>
        <div class="region-browser" style="margin-top:6px;">
          <div class="region-controls" style="margin-bottom:6px;">
            <label style="margin-right:8px;"><input type="checkbox" id="filterAll" checked disabled> All</label>
            <label style="margin-right:8px;"><input type="checkbox" id="filterHeader" checked> Header</label>
            <label style="margin-right:8px;"><input type="checkbox" id="filterTemp" checked> Temp</label>
            <label style="margin-right:8px;"><input type="checkbox" id="filterLabel" checked> Label</label>
            <label style="margin-right:8px;"><input type="checkbox" id="filterFooter" checked> Footer</label>
            <input id="regionSearch" type="text" placeholder="Search regions…" style="margin-left:8px; padding:2px 4px; width:180px;">
            <button id="resetRegionFilters" style="margin-left:8px;">Reset</button>
            <button id="showAllRects" style="margin-left:4px;">Show all</button>
            <button id="hideAllRects" style="margin-left:4px;">Hide all</button>
          </div>
          <div class="legend" style="font-size:12px; margin-bottom:6px;">
            <span style="display:inline-block;width:10px;height:10px;background:#ff6b6b;margin-right:4px;border:1px solid #333;vertical-align:middle;"></span> Header
            <span style="display:inline-block;width:10px;height:10px;background:#4ecdc4;margin-left:10px;margin-right:4px;border:1px solid #333;vertical-align:middle;"></span> Temp
            <span style="display:inline-block;width:10px;height:10px;background:#45b7d1;margin-left:10px;margin-right:4px;border:1px solid #333;vertical-align:middle;"></span> Label
            <span style="display:inline-block;width:10px;height:10px;background:#96ceb4;margin-left:10px;margin-right:4px;border:1px solid #333;vertical-align:middle;"></span> Footer
          </div>
          <div id="regionList" class="region-list" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:4px;"></div>
        </div>
      </details>
    </div>
    <script src="ui_generated.js?v=4"></script>
    <script src="sim.js?v=6"></script>
  </body>
  </html>


