#!/bin/bash

# Pre-commit hook to prevent credential leaks
# Only scans staged files, not the entire repository

echo "🔒 Security check for staged files..."

# Run security audit on staged files only
python3 scripts/security_audit_staged.py

if [ $? -ne 0 ]; then
    echo ""
    echo "❌ COMMIT BLOCKED: Security issues in staged files!"
    echo ""
    exit 1
fi

echo "✅ Security check passed"
exit 0