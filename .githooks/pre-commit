#!/bin/bash

# Pre-commit hook to prevent credential leaks

echo "Running security check before commit..."

# Run security audit
python3 scripts/security_audit.py

if [ $? -ne 0 ]; then
    echo ""
    echo "❌ COMMIT BLOCKED: Security issues detected!"
    echo ""
    echo "Please fix the security issues before committing."
    echo "If you need to bypass this check (NOT RECOMMENDED):"
    echo "  git commit --no-verify"
    echo ""
    exit 1
fi

echo "✅ Security check passed"
exit 0